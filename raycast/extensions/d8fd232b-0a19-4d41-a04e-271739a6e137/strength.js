var p=Object.defineProperty,B=Object.defineProperties,H=Object.getOwnPropertyDescriptor,U=Object.getOwnPropertyDescriptors,D=Object.getOwnPropertyNames,l=Object.getOwnPropertySymbols;var g=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable;var S=(r,t,e)=>t in r?p(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,L=(r,t)=>{for(var e in t||(t={}))g.call(t,e)&&S(r,e,t[e]);if(l)for(var e of l(t))C.call(t,e)&&S(r,e,t[e]);return r},_=(r,t)=>B(r,U(t)),V=r=>p(r,"__esModule",{value:!0});var E=(r,t)=>{var e={};for(var n in r)g.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&l)for(var n of l(r))t.indexOf(n)<0&&C.call(r,n)&&(e[n]=r[n]);return e};var W=(r,t)=>{for(var e in t)p(r,e,{get:t[e],enumerable:!0})},z=(r,t,e,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of D(t))!g.call(r,s)&&(e||s!=="default")&&p(r,s,{get:()=>t[s],enumerable:!(n=H(t,s))||n.enumerable});return r};var J=(r=>(t,e)=>r&&r.get(t)||(e=z(V({}),t,1),r&&r.set(t,e),e))(typeof WeakMap!="undefined"?new WeakMap:0);var Y={};W(Y,{default:()=>R});var c=require("react"),T=require("@raycast/api");var A=require("crypto"),k=require("fs");var u="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",d="0123456789";var v=require("@raycast/api"),K=()=>{let s=(0,v.getPreferenceValues)(),{strength:r,length:t,maxWordLength:e}=s,n=E(s,["strength","length","maxWordLength"]);return _(L({},n),{strength:parseInt(r,10),length:parseInt(t,10),maxWordLength:parseInt(e,10)})},h=K;function*f(...r){if(r.length===0)return;let t=r.map(n=>n[Symbol.iterator]()),e=t.map(n=>n.next());if(e.some(n=>n.done))throw new Error("Input contains an empty iterator.");for(let n=0;;){if(e[n].done){if(t[n]=r[n][Symbol.iterator](),e[n]=t[n].next(),++n>=t.length)return}else yield e.map(({value:s})=>s),n=0;e[n]=t[n].next()}}var a=class{constructor({strength:t,length:e}){this.strength=0;this.preferences=h();let[n,s]=this.generate({strength:t,length:e});this.password=n,this.strength=s}generate({strength:t,length:e}){let n=[];t&&(e=Math.ceil(t/this.entropy)),e=e;for(let s of(0,A.randomBytes)(e))n.push(this.data[s%this.data.length]);return[n.join(""),Math.floor(this.entropy*n.length)]}get entropy(){return Math.log2(this.data.length)}get data(){return""}},w=class extends a{constructor(){super(...arguments);this.id="ascii";this.title="ASCII characters with punctuation"}get data(){return u+d+this.preferences.specialCharacters}},b=class extends a{constructor(){super(...arguments);this.id="alphanumeric";this.title="ASCII characters, no punctuation"}get data(){return u+d}},y=class extends a{constructor(){super(...arguments);this.id="hex";this.title="Hexadecimal characters"}get data(){return"0123456789abcdef"}},x=class extends a{constructor(){super(...arguments);this.id="numeric";this.title="Digits only"}get data(){return d}},m=class extends a{constructor(){super(...arguments);this.id="dictionary";this.title="Dictionary words";this.words=[]}password_by_iterations(t){let e=[];for(let n=0;n<t;n++)e.push(this.data[Math.floor(Math.random()*this.data.length)]);return[e.join(this.preferences.delimiter),Math.floor(this.entropy*t)]}password_by_length(t){let e=[],n=0;for(;n<t;){let s=this.data[Math.floor(Math.random()*this.data.length)];e.push(s),n+=s.length+1}return[e.join(this.preferences.delimiter),Math.floor(this.entropy*e.length)]}generate({strength:t,length:e}){return t?this.password_by_iterations(Math.ceil(t/this.entropy)):this.password_by_length(e)}get data(){if(this.words)return this.words;try{return this.words=(0,k.readFileSync)("/usr/share/dict/words","utf8").split(/\r?\n/),this.words}catch(t){throw console.error(t),t}}},P=class extends m{constructor(){super(...arguments);this.id="pronounceable";this.title="Pronounceable, (mostly) nonsense words"}get data(){let t=["b","bl","br","cl","cr","d","dr","f","fl","fr","g","gl","gr","h","j","k","l","m","n","p","pl","pr","r","s","sk","sl","sm","sn","sp","st","str","sw","t","tr","v","w","y","z"],e=["b","ct","d","f","ft","g","h","k","l","m","mp","n","nd","ng","nk","nt","p","pt","r","sk","sp","ss","st","t","v","w","y","z"],n=["a","e","i","o","u"];this.words=[];for(let s of f(t,n,e))this.words.push(s.join(""));return this.words}};var i=require("@raycast/api");var G=r=>{let t=[{bits:28,color:"#e44759",icon:"\u{1F480}",name:"very_weak"},{bits:35,color:"#f8b32d",icon:"\u{1F622}",name:"weak"},{bits:60,color:"#67a4d3",icon:"\u{1F610}",name:"reasonable"},{bits:128,color:"#33ccb1",icon:"\u{1F60E}",name:"strong"},{bits:1/0,color:"#33cc33",icon:"\u{1F929}",name:"very_strong"}],e=t[0].icon;for(let n of t)if(r<n.bits){e=n.icon;break}return{source:e}};var O=({generator:r,generatePasswords:t})=>_jsx(i.List.Item,{key:r.id,title:r.password,subtitle:`Length: ${r.password.length}`,accessories:[{text:r.title}],icon:G(r.strength),actions:_jsx(i.ActionPanel,null,_jsx(i.Action.CopyToClipboard,{title:"Copy Password",content:r.password,onCopy:t}),_jsx(i.Action.Paste,{content:r.password,onPaste:t}))}),M=O;function R(){let[r,t]=(0,c.useState)(!0),[e,n]=(0,c.useState)(""),[s,j]=(0,c.useState)([]),{strength:N}=h(),I=()=>{if(parseInt(e)>0||e===""){let o=(parseInt(e,10)||N)*32;j([new m({strength:o}),new P({strength:o}),new w({strength:o}),new b({strength:o}),new x({strength:o}),new y({strength:o})])}};return(0,c.useEffect)(()=>{I(),t(!1)},[e]),_jsx(T.List,{isLoading:r,searchText:e,onSearchTextChange:n,navigationTitle:"Generate password of given strength",searchBarPlaceholder:"Generate password of given strength"},s.map(o=>_jsx(M,{key:o.id,generator:o,generatePasswords:I})))}module.exports=J(Y);0&&(module.exports={});
